services:
  - type: web
    name: api
    env: node
    rootDir: backend
    buildCommand: npm ci
    startCommand: npm start
    autoDeploy: true
    envVars:
      - key: NODE_ENV
        value: production
      - key: DB_PATH
        value: /var/data/database.sqlite
      - key: CORS_ORIGIN
        value: https://your-frontend.example.com
    disk:
      name: data
      mountPath: /var/data
      sizeGB: 1

  - type: web
    name: web
    env: node
    rootDir: .
    buildCommand: npm ci && npm run build
    startCommand: npx next start -p $PORT
    autoDeploy: true
    envVars:
      - key: NODE_ENV
        value: production
      # Ajusta este valor luego del primer deploy del API:
      # por ejemplo: https://api-xxxx.onrender.com/api
      - key: NEXT_PUBLIC_API_BASE
        value: ""
